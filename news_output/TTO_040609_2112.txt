 Tổng_Quan về J2ME ( Phần 2 )
a . Thiết_lập môi_trường lập_trình :
1 . Cài_đặt :
Bạn cần cài_đặt bộ J2SE vào máy_tính của bạn . Tôi giả_sử là bạn đang sử_dụng Windows 2000 phiên_bản Professional .
Địa_chỉ tải J2SE về là http : / / java.sun.com/j2se / , việc cài_đặt này khá dễ_dàng nên tôi không đi vào chi_tiết , tôi giả_sử là bạn cài_đặt ở thư_mục j 2sdk1 . 4.0 _ 03 ở thư_mục gốc ổ_đĩa C .
2 . Thiết_lập giá_trị cho các biến môi_trường :
• Bạn vào Control_Panel - & gt ; System - & gt ; chọn tab Advanced , click vào nút Environment_Variables . Bạn thêm giá_trị JAVA_ HOME với giá_trị là c : \ j2sdk1 . 4.0 _ 03 .
• Thiết_lập đường_dẫn :
Cũng vẫn ở trong cửa_sổ Environment_Variables . Thêm giá_trị c : \ j2sdk1 . 4.0 _ 03 \ bin vào biến môi_trường Path .
3 . Cài_đặt J2ME Wireless_Toolkit :
Đây là bộ công_cụ do Sun phát_triển , giúp các lập_trình_viên có_thể test và chạy thử chương_trình của mình mà không cần phải có máy điện_thoại thật . Bạn_đọc có_thể lấy bộ công_cụ này về từ địa_chỉ http : / / java.sun.com/products/j2mewtoolkit
Chú_ý là phải đăng_ký thành_viên trước khi download . Việc đăng_ký này là hoàn_toàn miễn_phí . Để cài_đặt , bạn làm theo hướng_dẫn của chương_trình . Tôi giả_sử bạn sẽ cài_đặt vào thư_mục Wtk104 trên thư_mục gốc ổ_đĩa C .
Sau khi cài_đặt thành_công , bạn sẽ có thư_mục chương_trình trong menu Start như hình_vẽ .
Để chạy bộ Tool_Kit này , bạn chọn Ktoolbar . Nếu mọi việc suôn_sẻ , bạn sẽ thấy cửa bộ chính hiện ra như hình bên dưới .
Chúc_mừng bạn , bạn đã sẵn_sàng cho việc viết chương_trình cho chiếc điện_thoại của mình .
b . Viết những dòng code đầu_tiên :
Sau khi hoàn_thành các các bước ở trên , đây là lúc bắt_đầu viết những dòng code đầu_tiên . Bạn nhấp chuột vào nút bấm New_Project và nhập vào tên Project và Class mà bạn muốn tạo , ví_dụ TestMidlet . Chú_ý là bạn không nhất_thiết phải tạo trùng tên class với tên Project .
Trên cửa_sổ chương_trình sẽ hiển_thị các thông_báo về việc tạo các thư_mục phục_vụ cho việc xây_dựng và thực_thi mã chương_trình .
Bạn hãy dùng Windows_Explorer để xem_xét các thư_mục vừa tạo .
ToolKit sẽ tự_động tạo 1 thư_mục con trong thư_mục apps có tên trùng với tên Project mà bạn vừa tạo , trong trường_hợp này là TestMidlet . Ta hãy điểm sơ qua vài thư_mục quan_trọng .
1 . Bin : Chứa 2 file để cài_đặt , . Jar ( Java ARchive ) và file miêu_tả . jad .
2 . Lib : Chứa các thư_viện bổ_sung mà bạn muốn thêm vào chương_trình .
3 . Res ; là thư_mục để bạn để các file tài_nguyên dành riêng cho chương_trình như file văn_bản và hình_ảnh .
4 . Src : Đây là thư_mục quan_trọng nhất , là nơi bạn đặt các file chứa mã nguồn .
Ngoài_ra , khi chạy chương_trình bộ Toolkit này còn tạo ra một_số thư_mục để_dành mục_đích riêng .
Bây_giờ là đến lúc bắt_đầu viết mã chương_trình . Bạn hãy dùng 1 chương_trình sọan_thảo văn_bản nào_đó , và viết đoạn code sau
import javax . microedition.lcdui . ; import javax . microedition.midlet . ;
public class TestMidlet extends MIDlet implements CommandListener {
private Form m MainForm ; public TestMidlet ( ) { mMainForm = new Form ( " Chuong trinh so 1 " ) ; mMainForm.append ( new StringItem ( null , " Chao cac ban , MIDP ! " ) ) ; mMainForm.addCommand ( new Command ( " Exit " , Command.EXIT , 0 ) ) ; mMainForm.setCommandListener ( this ) ; } public void start App ( ) { Display.getDisplay ( this ) . setCurrent ( mMainForm ) ; }
public void pause App ( ) { } public void destroy App ( boolean unconditional ) { } public void command Action ( Command c , Displayable s ) { notifyDestroyed ( ) ; } }
Sau đó , hãy lưu đoạn code trên vào file tên là TestMidlet.java trong thư_mục src .
Sau đó bấm vào nút Build , nếu code của bạn không bị lỗi , bạn sẽ nhận được thông_báo sau :
- Project settings saved ; Building " TestMidlet " ; Build complete .
- Nhấn nút Run để chạy Emulator , chọn TestMidlet .
- Nếu bạn thấy trên máy bạn xuất_hiện hình_như hình_vẽ bên thì xin chúc_mừng bạn . Chương_trình J2ME đầu_tiên đã chạy thành_công .
c . Tìm_hiểu chi_tiết mã nguồn :
Giống như dạng chương_trình Applet trên J2SE , một Midlet luôn_luôn kế_thừa javax . microedition.midlet .
Hàm cơ_bản nhất trong mọi Midlet là start App ( ) , hàm này sẽ khởi tạo Midlet cũng_như vận_hành các thành_phần hoặc đối_tượng khác , ngoài start App ( ) , mỗi Midlet còn có pause App ( ) và destroy App ( ) , mỗi hàm này sẽ đựợc gọi thực_thi tương_ứng khi user chọn dừng hoặc thoát chương_trình .
Màn_hình thật_sự trên điện_thọai_di_động được hình_tượng hóa bằng đối_tượng Display . Mỗi_Midlet chỉ có một và duy_nhất một đối_tượng Display , mà bạn có_thể truy_cập bằng cách dùng lệnh get Display ( this )
III . Kết_luận : Trong phạm_vi bài viết này , người viết chỉ có dụng_ý giới_thiệu đến mọi người lợi_ích của J2ME , đồng_thời giới_thiệu mô_hình J2ME trong kiến_trúc tổng_thể Java 2 của Sun .
Ngoài_ra qua một ví_dụ nhỏ và hết_sức cơ_bản , bạn_đọc có_thể hiểu rõ cách một chưong trình Midlet được kích_hoạt và chạy như_thế_nào . Hi_vọng trong những bài viết sau , sẽ giới_thiệu cho mọi người những ứng_dụng có_ích và thực_tế hơn , cũng_như cách chạy trên điện_thoại thật_sự .
NGUYỄN_HỮU_MAI ( www.JavaVietnam.org )
